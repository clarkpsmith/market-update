{"ast":null,"code":"var _jsxFileName = \"/Users/clarksmith/Desktop/Programming/capstone2/react-test-marketupdate/src/App.js\";\nimport \"./App.css\";\nimport React, { useState, useEffect } from \"react\";\nimport Navbar from \"./navbar/Navbar\";\nimport { Redirect, Route, Switch, useHistory } from \"react-router-dom\";\nimport Search from \"./search/Search\";\nimport MarketUpdateApi from \"./api/MarketUpdateApi\";\nimport Watchlist from \"./watchlist/Watchlist\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Login from \"./auth/Login\";\nimport SignUp from \"./auth/SignUp\";\nimport Profile from \"./auth/Profile\";\nimport ProtectedRoute from \"./helpers/ProtectedRoute\";\nimport NewsSummary from \"./news/NewsSummary\";\nimport { UPDATE_PROFILE, LOG_OUT, UPDATE_CURR_USER } from \"./actions/types\";\nimport UserContext from \"./common/UserContext\";\nimport jwt from \"jsonwebtoken\";\nimport MktSummary from \"./mktSummary/MktSummary\";\nimport Delete from \"./delete/Delete\";\nimport ChaseLoading from \"./chaseloading/ChaseLoading\";\n\nfunction App() {\n  const dispatch = useDispatch();\n  const currentUser = useSelector(store => store.currentUser);\n  const [currentToken, setCurrentToken] = useState(getTokenFromLocalStorage() || null);\n  const [isLoading, setIsLoading] = useState(true);\n  const history = useHistory();\n  useEffect(() => {\n    async function loadUser() {\n      MarketUpdateApi.token = currentToken;\n      await updateCurrentUser(currentToken);\n      setIsLoading(false);\n    }\n\n    loadUser();\n  }, [currentToken]);\n\n  async function updateCurrentUser(currentToken) {\n    try {\n      if (currentToken) {\n        const {\n          username\n        } = jwt.decode(currentToken);\n        const res2 = await MarketUpdateApi.getCurrentUserData(username);\n        dispatch({\n          type: UPDATE_CURR_USER,\n          currentUser: res2\n        });\n        return {\n          success: true\n        };\n      }\n    } catch (err) {\n      console.error(\"Update current user failed\", err);\n      return {\n        success: false,\n        err\n      };\n    }\n  }\n\n  function addTokenToLocalStorage(token) {\n    localStorage.setItem(\"token\", token);\n  }\n\n  function getTokenFromLocalStorage() {\n    const res = localStorage.getItem(\"token\");\n    return res;\n  }\n\n  async function login({\n    username,\n    password\n  }) {\n    try {\n      const token = await MarketUpdateApi.getToken(username, password);\n      setCurrentToken(() => token);\n      addTokenToLocalStorage(token);\n      const res = await updateCurrentUser(token);\n      return res;\n    } catch (err) {\n      return {\n        success: false,\n        err\n      };\n    }\n  }\n\n  async function logOut() {\n    await MarketUpdateApi.clearToken();\n    dispatch({\n      type: LOG_OUT\n    });\n    setCurrentToken(null);\n    localStorage.clear();\n    history.push(\"/\");\n  }\n\n  async function signUp(formData) {\n    try {\n      const res = await MarketUpdateApi.registerUser(formData);\n      setCurrentToken(res);\n      addTokenToLocalStorage(res);\n      const res2 = updateCurrentUser(res);\n      return res2;\n    } catch (err) {\n      console.error(\"Sign Up Failed\", err);\n      return {\n        success: false,\n        err\n      };\n    }\n  }\n\n  async function updateProfile(formData) {\n    try {\n      const res = await MarketUpdateApi.updateProfile(formData);\n      dispatch({\n        type: UPDATE_PROFILE,\n        currentUser: res.user\n      });\n      return {\n        success: true\n      };\n    } catch (err) {\n      console.error(\"Update Profile Failed\", err);\n      return {\n        success: false,\n        err\n      };\n    }\n  }\n\n  async function apply(username, id) {\n    const res = await MarketUpdateApi.apply(username, id);\n    return res;\n  }\n\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(ChaseLoading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(UserContext.Provider, {\n    value: {\n      currentUser,\n      apply,\n      updateCurrentUser,\n      logOut,\n      updateProfile\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    logOut: logOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MktSummary, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/news\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(NewsSummary, {\n    numberOfArticles: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/watchlist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ProtectedRoute, {\n    Component: Watchlist,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 16\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Login, {\n    login: login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SignUp, {\n    signUp: signUp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ProtectedRoute, {\n    Component: Profile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/delete\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ProtectedRoute, {\n    Component: Delete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  })))));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/clarksmith/Desktop/Programming/capstone2/react-test-marketupdate/src/App.js"],"names":["React","useState","useEffect","Navbar","Redirect","Route","Switch","useHistory","Search","MarketUpdateApi","Watchlist","useDispatch","useSelector","Login","SignUp","Profile","ProtectedRoute","NewsSummary","UPDATE_PROFILE","LOG_OUT","UPDATE_CURR_USER","UserContext","jwt","MktSummary","Delete","ChaseLoading","App","dispatch","currentUser","store","currentToken","setCurrentToken","getTokenFromLocalStorage","isLoading","setIsLoading","history","loadUser","token","updateCurrentUser","username","decode","res2","getCurrentUserData","type","success","err","console","error","addTokenToLocalStorage","localStorage","setItem","res","getItem","login","password","getToken","logOut","clearToken","clear","push","signUp","formData","registerUser","updateProfile","user","apply","id"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport React, { useState, useEffect } from \"react\";\nimport Navbar from \"./navbar/Navbar\";\nimport { Redirect, Route, Switch, useHistory } from \"react-router-dom\";\nimport Search from \"./search/Search\";\nimport MarketUpdateApi from \"./api/MarketUpdateApi\";\nimport Watchlist from \"./watchlist/Watchlist\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Login from \"./auth/Login\";\nimport SignUp from \"./auth/SignUp\";\nimport Profile from \"./auth/Profile\";\nimport ProtectedRoute from \"./helpers/ProtectedRoute\";\nimport NewsSummary from \"./news/NewsSummary\";\nimport { UPDATE_PROFILE, LOG_OUT, UPDATE_CURR_USER } from \"./actions/types\";\nimport UserContext from \"./common/UserContext\";\nimport jwt from \"jsonwebtoken\";\nimport MktSummary from \"./mktSummary/MktSummary\";\nimport Delete from \"./delete/Delete\";\nimport ChaseLoading from \"./chaseloading/ChaseLoading\";\n\nfunction App() {\n  const dispatch = useDispatch();\n  const currentUser = useSelector((store) => store.currentUser);\n\n  const [currentToken, setCurrentToken] = useState(\n    getTokenFromLocalStorage() || null\n  );\n\n  const [isLoading, setIsLoading] = useState(true);\n  const history = useHistory();\n\n  useEffect(() => {\n    async function loadUser() {\n      MarketUpdateApi.token = currentToken;\n      await updateCurrentUser(currentToken);\n\n      setIsLoading(false);\n    }\n\n    loadUser();\n  }, [currentToken]);\n\n  async function updateCurrentUser(currentToken) {\n    try {\n      if (currentToken) {\n        const { username } = jwt.decode(currentToken);\n        const res2 = await MarketUpdateApi.getCurrentUserData(username);\n        dispatch({ type: UPDATE_CURR_USER, currentUser: res2 });\n        return { success: true };\n      }\n    } catch (err) {\n      console.error(\"Update current user failed\", err);\n      return { success: false, err };\n    }\n  }\n\n  function addTokenToLocalStorage(token) {\n    localStorage.setItem(\"token\", token);\n  }\n  function getTokenFromLocalStorage() {\n    const res = localStorage.getItem(\"token\");\n\n    return res;\n  }\n\n  async function login({ username, password }) {\n    try {\n      const token = await MarketUpdateApi.getToken(username, password);\n      setCurrentToken(() => token);\n      addTokenToLocalStorage(token);\n      const res = await updateCurrentUser(token);\n      return res;\n    } catch (err) {\n      return { success: false, err };\n    }\n  }\n\n  async function logOut() {\n    await MarketUpdateApi.clearToken();\n\n    dispatch({ type: LOG_OUT });\n    setCurrentToken(null);\n    localStorage.clear();\n    history.push(\"/\");\n  }\n\n  async function signUp(formData) {\n    try {\n      const res = await MarketUpdateApi.registerUser(formData);\n      setCurrentToken(res);\n      addTokenToLocalStorage(res);\n      const res2 = updateCurrentUser(res);\n      return res2;\n    } catch (err) {\n      console.error(\"Sign Up Failed\", err);\n      return { success: false, err };\n    }\n  }\n\n  async function updateProfile(formData) {\n    try {\n      const res = await MarketUpdateApi.updateProfile(formData);\n      dispatch({ type: UPDATE_PROFILE, currentUser: res.user });\n      return { success: true };\n    } catch (err) {\n      console.error(\"Update Profile Failed\", err);\n      return { success: false, err };\n    }\n  }\n\n  async function apply(username, id) {\n    const res = await MarketUpdateApi.apply(username, id);\n\n    return res;\n  }\n\n  if (isLoading) {\n    return <ChaseLoading />;\n  }\n  return (\n    <div className=\"App\">\n      <UserContext.Provider\n        value={{ currentUser, apply, updateCurrentUser, logOut, updateProfile }}\n      >\n        <Navbar logOut={logOut} />\n\n        <main>\n          <Switch>\n            <Route exact path=\"/\">\n              <MktSummary />\n            </Route>\n            <Route exact path=\"/news\">\n              <NewsSummary numberOfArticles=\"20\" />\n            </Route>\n            <Route exact path=\"/watchlist\">\n              {<ProtectedRoute Component={Watchlist} />}\n            </Route>\n            <Route exact path=\"/login\">\n              <Login login={login} />\n            </Route>\n            <Route exact path=\"/search\">\n              <Search />\n            </Route>\n            <Route exact path=\"/signup\">\n              <SignUp signUp={signUp} />\n            </Route>\n            <Route exact path=\"/profile\">\n              <ProtectedRoute Component={Profile} />\n            </Route>\n            <Route exact path=\"/delete\">\n              <ProtectedRoute Component={Delete} />\n            </Route>\n            <Redirect to=\"/\"></Redirect>\n          </Switch>\n        </main>\n      </UserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}